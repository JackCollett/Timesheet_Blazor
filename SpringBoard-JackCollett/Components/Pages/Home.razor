@page "/"
@using Microsoft.EntityFrameworkCore
@rendermode InteractiveServer
@using static Components.Pages.Counter
@inject AppDbContext Db

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<Counter IncrementAmount="10" />

<br><br/>

<h1>DataBase:</h1>
<ul>
    @foreach (var entry in entries)
    {
        <li>
            Employee: @entry.Employee, Date: @entry.Today, Hours: @entry.Hours, Job: @entry.Job
        </li>
    }
</ul>
<button class="button btn-primary" @onclick="AddEntry">Add Entry</button>
@code {
    
    // List of entries 
    private List<TimesheetEntry> entries = new();

    protected override async Task OnInitializedAsync()
    {
        entries = await Db.TimesheetEntries.ToListAsync();
    }
    // Function for adding entries
        private async Task AddEntry()
    {
        var entry = new TimesheetEntry
        {
            Employee = 105, 
            Today = new DateOnly(2025,6,5), 
            Hours = 8, 
            Job = 57
        };
        Db.TimesheetEntries.Add(entry);
        await Db.SaveChangesAsync();
        entries = await Db.TimesheetEntries.ToListAsync(); // Refresh
    }

}using Microsoft.EntityFrameworkCore;
#line default
